/** Generated by english-annotation-buster, Powered by Google Translate.**/
/*
 * Copyright 2002-2018 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * 版权所有2002-2018的原始作者。 
 * 根据Apache许可证2.0版（"许可证"）获得许可； 
 * 除非遵守许可，否则不得使用此文件。 
 * 您可以在https://www.apache.org/licenses/LICENSE-2.0上获得许可的副本。 
 * 除非适用法律要求或以书面形式同意，否则根据"许可"分发的软件将按"现状"分发，没有任何明示或暗示的保证或条件。 
 * 有关许可下特定的语言管理权限和限制，请参阅许可。 
 * 
 */

package org.springframework.remoting.jaxws;

import java.io.IOException;
import java.net.URL;
import java.util.concurrent.Executor;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import javax.xml.ws.WebServiceFeature;
import javax.xml.ws.handler.HandlerResolver;

import org.springframework.core.io.Resource;
import org.springframework.lang.Nullable;
import org.springframework.util.Assert;

/**
 * Factory for locally defined JAX-WS {@link javax.xml.ws.Service} references.
 * Uses the JAX-WS {@link javax.xml.ws.Service#create} factory API underneath.
 *
 * <p>Serves as base class for {@link LocalJaxWsServiceFactoryBean} as well as
 * {@link JaxWsPortClientInterceptor} and {@link JaxWsPortProxyFactoryBean}.
 *
 * @author Juergen Hoeller
 * @since 2.5
 * @see javax.xml.ws.Service
 * @see LocalJaxWsServiceFactoryBean
 * @see JaxWsPortClientInterceptor
 * @see JaxWsPortProxyFactoryBean
 */
/**
 * 本地定义的JAX-WS {@link  javax.xml.ws.Service}引用的工厂。 
 * 在下面使用JAX-WS {@link  javax.xml.ws.Service＃create}工厂API。 
 *  <p>用作{@link  LocalJaxWsServiceFactoryBean}以及{@link  JaxWsPortClientInterceptor}和{@link  JaxWsPortProxyFactoryBean}的基类。 
 *  @author  Juergen Hoeller @since 2.5起
 * @see  javax.xml.ws.Service 
 * @see  LocalJaxWsServiceFactoryBean 
 * @see  JaxWsPortClientInterceptor 
 * @see  JaxWsPortProxyFactoryBean
 */
public class LocalJaxWsServiceFactory {

	@Nullable
	private URL wsdlDocumentUrl;

	@Nullable
	private String namespaceUri;

	@Nullable
	private String serviceName;

	@Nullable
	private WebServiceFeature[] serviceFeatures;

	@Nullable
	private Executor executor;

	@Nullable
	private HandlerResolver handlerResolver;


	/**
	 * Set the URL of the WSDL document that describes the service.
	 * @see #setWsdlDocumentResource(Resource)
	 */
	/**
	 * 设置描述服务的WSDL文档的URL。 
	 *  
	 * @see  #setWsdlDocumentResource（资源）
	 */
	public void setWsdlDocumentUrl(@Nullable URL wsdlDocumentUrl) {
		this.wsdlDocumentUrl = wsdlDocumentUrl;
	}

	/**
	 * Set the WSDL document URL as a {@link Resource}.
	 * @since 3.2
	 */
	/**
	 * 将WSDL文档URL设置为{@link  Resource}。 
	 *  @3.2起
	 */
	public void setWsdlDocumentResource(Resource wsdlDocumentResource) throws IOException {
		Assert.notNull(wsdlDocumentResource, "WSDL Resource must not be null");
		this.wsdlDocumentUrl = wsdlDocumentResource.getURL();
	}

	/**
	 * Return the URL of the WSDL document that describes the service.
	 */
	/**
	 * 返回描述服务的WSDL文档的URL。 
	 * 
	 */
	@Nullable
	public URL getWsdlDocumentUrl() {
		return this.wsdlDocumentUrl;
	}

	/**
	 * Set the namespace URI of the service.
	 * Corresponds to the WSDL "targetNamespace".
	 */
	/**
	 * 设置服务的名称空间URI。 
	 * 对应于WSDL"targetNamespace"。 
	 * 
	 */
	public void setNamespaceUri(@Nullable String namespaceUri) {
		this.namespaceUri = (namespaceUri != null ? namespaceUri.trim() : null);
	}

	/**
	 * Return the namespace URI of the service.
	 */
	/**
	 * 返回服务的名称空间URI。 
	 * 
	 */
	@Nullable
	public String getNamespaceUri() {
		return this.namespaceUri;
	}

	/**
	 * Set the name of the service to look up.
	 * Corresponds to the "wsdl:service" name.
	 */
	/**
	 * 设置要查找的服务的名称。 
	 * 对应于"wsdl：service"名称。 
	 * 
	 */
	public void setServiceName(@Nullable String serviceName) {
		this.serviceName = serviceName;
	}

	/**
	 * Return the name of the service.
	 */
	/**
	 * 返回服务的名称。 
	 * 
	 */
	@Nullable
	public String getServiceName() {
		return this.serviceName;
	}

	/**
	 * Specify WebServiceFeature objects (e.g. as inner bean definitions)
	 * to apply to JAX-WS service creation.
	 * @since 4.0
	 * @see Service#create(QName, WebServiceFeature...)
	 */
	/**
	 * 指定WebServiceFeature对象（例如，作为内部bean定义）以应用于JAX-WS服务创建。 
	 *  @始于4.0 
	 * @see  Service＃create（QName，WebServiceFeature ...）
	 */
	public void setServiceFeatures(WebServiceFeature... serviceFeatures) {
		this.serviceFeatures = serviceFeatures;
	}

	/**
	 * Set the JDK concurrent executor to use for asynchronous executions
	 * that require callbacks.
	 * @see javax.xml.ws.Service#setExecutor
	 */
	/**
	 * 设置JDK并发执行器以用于需要回调的异步执行。 
	 *  
	 * @see  javax.xml.ws.Service＃setExecutor
	 */
	public void setExecutor(Executor executor) {
		this.executor = executor;
	}

	/**
	 * Set the JAX-WS HandlerResolver to use for all proxies and dispatchers
	 * created through this factory.
	 * @see javax.xml.ws.Service#setHandlerResolver
	 */
	/**
	 * 设置JAX-WS HandlerResolver以用于通过此工厂创建的所有代理和调度程序。 
	 *  
	 * @see  javax.xml.ws.Service＃setHandlerResolver
	 */
	public void setHandlerResolver(HandlerResolver handlerResolver) {
		this.handlerResolver = handlerResolver;
	}


	/**
	 * Create a JAX-WS Service according to the parameters of this factory.
	 * @see #setServiceName
	 * @see #setWsdlDocumentUrl
	 */
	/**
	 * 根据该工厂的参数创建一个JAX-WS服务。 
	 *  
	 * @see  #setServiceName 
	 * @see  #setWsdlDocumentUrl
	 */
	public Service createJaxWsService() {
		Assert.notNull(this.serviceName, "No service name specified");
		Service service;

		if (this.serviceFeatures != null) {
			service = (this.wsdlDocumentUrl != null ?
				Service.create(this.wsdlDocumentUrl, getQName(this.serviceName), this.serviceFeatures) :
				Service.create(getQName(this.serviceName), this.serviceFeatures));
		}
		else {
			service = (this.wsdlDocumentUrl != null ?
					Service.create(this.wsdlDocumentUrl, getQName(this.serviceName)) :
					Service.create(getQName(this.serviceName)));
		}

		if (this.executor != null) {
			service.setExecutor(this.executor);
		}
		if (this.handlerResolver != null) {
			service.setHandlerResolver(this.handlerResolver);
		}

		return service;
	}

	/**
	 * Return a QName for the given name, relative to the namespace URI
	 * of this factory, if given.
	 * @see #setNamespaceUri
	 */
	/**
	 * 返回给定名称的QName，相对于该工厂的名称空间URI（如果有）。 
	 *  
	 * @see  #setNamespaceUri
	 */
	protected QName getQName(String name) {
		return (getNamespaceUri() != null ? new QName(getNamespaceUri(), name) : new QName(name));
	}

}
